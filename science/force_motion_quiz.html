<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° Fuerza y Movimiento - Quiz Interactivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3), 0 0 60px rgba(0, 180, 216, 0.1);
            border: 1px solid rgba(0, 180, 216, 0.2);
        }

        h1 {
            text-align: center;
            color: #00b4d8;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
        }

        /* Language Toggle */
        .language-toggle {
            text-align: center;
            margin-bottom: 20px;
        }

        .toggle-btn {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: transform 0.2s;
        }

        .toggle-btn:hover {
            transform: scale(1.05);
        }

        /* Flashcard Section */
        .flashcard-section {
            margin-bottom: 30px;
        }

        .flashcard-section h2 {
            text-align: center;
            color: #00b4d8;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .flashcard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .flashcard {
            perspective: 1000px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100px;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 10px;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1.3;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .flashcard-front {
            background: linear-gradient(135deg, #ffffff, #f0f9ff);
            color: #0077b6;
            font-weight: bold;
            border: 2px solid #00b4d8;
        }

        .flashcard-back {
            background: linear-gradient(135deg, #caf0f8, #e0f7fa);
            color: #333;
            transform: rotateY(180deg);
            border: 2px solid #00b4d8;
        }

        /* Hover translation */
        .translatable {
            position: relative;
            border-bottom: 1px dotted #00b4d8;
            cursor: help;
        }

        .translatable:hover::after {
            content: attr(data-en);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 100;
        }

        /* Progress Bar */
        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #00d4ff, #0077b6);
            height: 100%;
            transition: width 0.3s;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #666;
        }

        .timer {
            font-weight: bold;
            color: #00b4d8;
        }

        .timer.warning { color: #ff9f1c; }
        .timer.danger { color: #ff6b6b; animation: pulse 0.5s infinite; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Question */
        .category {
            display: inline-block;
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-bottom: 15px;
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Options */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .option:hover {
            border-color: #00b4d8;
            background: #e0f7fa;
        }

        .option.selected {
            border-color: #00b4d8;
            background: linear-gradient(135deg, #caf0f8, #e0f7fa);
        }

        .option.correct {
            border-color: #27ae60;
            background: #e8f8f0;
        }

        .option.incorrect {
            border-color: #e74c3c;
            background: #fde8e8;
        }

        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        /* Feedback */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .feedback.correct {
            background: #e8f8f0;
            border: 2px solid #27ae60;
            color: #27ae60;
        }

        .feedback.incorrect {
            background: #fde8e8;
            border: 2px solid #e74c3c;
            color: #e74c3c;
        }

        /* Results */
        .results {
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff, #0077b6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: white;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
        }

        .score-number {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .results-message {
            font-size: 1.2rem;
            margin: 20px 0;
            color: #666;
        }

        /* Review Section */
        .review-section {
            background: linear-gradient(135deg, #e0f7fa, #f0f9ff);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            border: 2px solid #00b4d8;
        }

        .review-section h3 {
            color: #0077b6;
            margin-bottom: 15px;
            text-align: center;
        }

        .review-progress {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .review-question {
            font-size: 1.05rem;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .review-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .review-option {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .review-option:hover {
            border-color: #00b4d8;
            background: #caf0f8;
        }

        .review-option.selected {
            border-color: #00b4d8;
            background: #caf0f8;
        }

        .review-option.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .review-option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .review-option.reveal-correct {
            border-color: #4CAF50;
            background: #e8f5e9;
            animation: glow 0.5s ease-in-out;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #4CAF50; }
            50% { box-shadow: 0 0 20px #4CAF50; }
        }

        .review-feedback {
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
        }

        .review-feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .review-feedback.incorrect {
            background: #ffebee;
            color: #c62828;
        }

        .review-btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .review-btn-check {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
        }

        .review-btn-next {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .review-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        .review-score {
            text-align: center;
            padding: 20px;
        }

        .review-score h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }

        .review-score p {
            color: #7f8c8d;
        }

        .hidden {
            display: none !important;
        }

        /* Restart separator */
        .restart-separator {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed #ccc;
        }

        .restart-separator p {
            color: #7f8c8d;
            font-size: 0.85rem;
            margin-bottom: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <!-- Start Screen -->
            <div id="startScreen">
                <h1>‚ö° Fuerza y Movimiento</h1>
                <p class="subtitle">Force and Motion - Interactive Quiz</p>

                <div class="language-toggle">
                    <button class="toggle-btn" onclick="toggleLanguage()">
                        üåê <span id="langText">Show English</span>
                    </button>
                </div>

                <div class="flashcard-section">
                    <h2>üìö Vocabulario / Vocabulary</h2>
                    <p style="text-align: center; color: #666; margin-bottom: 15px; font-size: 0.85rem;">
                        (Haz clic para voltear / Click to flip)
                    </p>
                    <div class="flashcard-grid" id="flashcardGrid"></div>
                </div>

                <button class="btn btn-primary" onclick="startQuiz()">
                    üöÄ Comenzar Quiz / Start Quiz
                </button>
            </div>

            <!-- Quiz Screen -->
            <div id="quizScreen" class="hidden">
                <div class="language-toggle" style="margin-bottom: 15px;">
                    <button class="toggle-btn" onclick="toggleLanguage()">
                        üåê <span id="langTextQuiz">Show English</span>
                    </button>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="stats">
                    <span id="questionNum">Pregunta 1 de 15</span>
                    <span class="timer" id="timer">‚è±Ô∏è 1:00</span>
                    <span id="scoreDisplay">Puntos: 0</span>
                </div>

                <div class="category" id="category"></div>
                <div class="question" id="questionText"></div>
                <div class="options" id="optionsContainer"></div>

                <button class="btn btn-primary" id="submitBtn" onclick="submitAnswer()" disabled>
                    Enviar Respuesta / Submit
                </button>
                <button class="btn btn-success hidden" id="nextBtn" onclick="nextQuestion()">
                    Siguiente ‚Üí / Next ‚Üí
                </button>

                <div class="feedback hidden" id="feedback"></div>
            </div>

            <!-- Results Screen -->
            <div id="resultsScreen" class="hidden">
                <div class="results">
                    <div class="language-toggle" style="margin-bottom: 15px;">
                        <button class="toggle-btn" onclick="toggleLanguage()">
                            üåê <span id="langTextResults">Show English</span>
                        </button>
                    </div>
                    
                    <h1>üéâ ¬°Quiz Completado!</h1>
                    <div class="score-circle">
                        <span class="score-number" id="finalScore">0%</span>
                        <span class="score-label">Correctas</span>
                    </div>
                    <p class="results-message" id="resultsMessage"></p>

                    <div class="review-section hidden" id="reviewSection">
                        <h3 id="reviewHeader">üìù ¬°Practiquemos las preguntas que fallaste!</h3>
                        <div class="review-progress" id="reviewProgress">Pregunta 1 de 3</div>
                        <div class="review-question" id="reviewQuestion"></div>
                        <div class="review-options" id="reviewOptions"></div>
                        <div class="review-feedback hidden" id="reviewFeedback"></div>
                        <button class="review-btn review-btn-check" id="reviewCheckBtn" onclick="checkReviewAnswer()" disabled>Verificar / Check</button>
                        <button class="review-btn review-btn-next hidden" id="reviewNextBtn" onclick="nextReviewQuestion()">Siguiente ‚Üí / Next ‚Üí</button>
                        <div class="review-score hidden" id="reviewScore">
                            <h4 id="reviewCompleteHeader">üéâ ¬°Repaso Completado!</h4>
                            <p id="reviewScoreText"></p>
                        </div>
                    </div>

                    <div class="restart-separator">
                        <p>¬øListo para otro intento? / Ready for another try?</p>
                    </div>
                    <button class="btn btn-secondary" onclick="restartQuiz()">
                        üîÑ Intentar de Nuevo / Try Again
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vocabulary flashcards
        const flashcards = [
            { spanish: "Fuerza", english: "Force" },
            { spanish: "Movimiento", english: "Motion/Movement" },
            { spanish: "Gravedad", english: "Gravity" },
            { spanish: "Empuj√≥n", english: "Push" },
            { spanish: "Jal√≥n/Tirar", english: "Pull" },
            { spanish: "Fuerza Equilibrada", english: "Balanced Force" },
            { spanish: "Fuerza Desequilibrada", english: "Unbalanced Force" },
            { spanish: "Inercia", english: "Inertia" },
            { spanish: "Aceleraci√≥n", english: "Acceleration" },
            { spanish: "Fricci√≥n", english: "Friction" },
            { spanish: "Masa", english: "Mass" },
            { spanish: "Velocidad", english: "Speed/Velocity" },
            { spanish: "Palanca", english: "Lever" },
            { spanish: "Polea", english: "Pulley" },
            { spanish: "Plano Inclinado", english: "Inclined Plane/Ramp" },
            { spanish: "Rueda y Eje", english: "Wheel and Axle" },
            { spanish: "Tornillo", english: "Screw" },
            { spanish: "Cu√±a", english: "Wedge" },
            { spanish: "M√°quina Simple", english: "Simple Machine" },
            { spanish: "Trabajo", english: "Work" }
        ];

        // Question bank
        const questionBank = [
            // Balanced vs Unbalanced Forces
            {
                category: "Fuerzas / Forces",
                question: "¬øQu√© pasa cuando las <span class='translatable' data-en='forces'>fuerzas</span> est√°n <span class='translatable' data-en='balanced'>equilibradas</span>?",
                questionEn: "What happens when forces are balanced?",
                options: [
                    "El objeto se mueve m√°s r√°pido",
                    "El objeto no cambia su movimiento",
                    "El objeto siempre se detiene",
                    "El objeto cambia de direcci√≥n"
                ],
                optionsEn: [
                    "The object moves faster",
                    "The object doesn't change its motion",
                    "The object always stops",
                    "The object changes direction"
                ],
                correct: 1,
                explanation: "Cuando las fuerzas est√°n equilibradas, el objeto mantiene su estado de movimiento (sigue movi√©ndose o sigue quieto).",
                explanationEn: "When forces are balanced, the object maintains its state of motion (keeps moving or stays still)."
            },
            {
                category: "Fuerzas / Forces",
                question: "¬øQu√© es una <span class='translatable' data-en='unbalanced force'>fuerza desequilibrada</span>?",
                questionEn: "What is an unbalanced force?",
                options: [
                    "Fuerzas iguales en direcciones opuestas",
                    "Fuerzas que causan cambio en el movimiento",
                    "Fuerzas que no afectan un objeto",
                    "Fuerzas que siempre detienen el movimiento"
                ],
                optionsEn: [
                    "Equal forces in opposite directions",
                    "Forces that cause change in motion",
                    "Forces that don't affect an object",
                    "Forces that always stop motion"
                ],
                correct: 1,
                explanation: "Las fuerzas desequilibradas causan un cambio en el movimiento del objeto (acelera, frena, o cambia direcci√≥n).",
                explanationEn: "Unbalanced forces cause a change in an object's motion (speeds up, slows down, or changes direction)."
            },
            {
                category: "Fuerzas / Forces",
                question: "Un libro est√° quieto en una mesa. Las fuerzas est√°n:",
                questionEn: "A book is sitting still on a table. The forces are:",
                options: [
                    "Desequilibradas",
                    "Equilibradas",
                    "No hay fuerzas",
                    "Solo hay gravedad"
                ],
                optionsEn: [
                    "Unbalanced",
                    "Balanced",
                    "There are no forces",
                    "There's only gravity"
                ],
                correct: 1,
                explanation: "La gravedad empuja hacia abajo y la mesa empuja hacia arriba con fuerza igual - est√°n equilibradas.",
                explanationEn: "Gravity pushes down and the table pushes up with equal force - they're balanced."
            },
            // Newton's Laws
            {
                category: "Leyes de Newton / Newton's Laws",
                question: "La Primera Ley de Newton dice que un objeto en <span class='translatable' data-en='rest'>reposo</span> permanece en reposo a menos que:",
                questionEn: "Newton's First Law says an object at rest stays at rest unless:",
                options: [
                    "La gravedad lo afecta",
                    "Una fuerza desequilibrada act√∫a sobre √©l",
                    "Tiene mucha masa",
                    "Est√° en el espacio"
                ],
                optionsEn: [
                    "Gravity affects it",
                    "An unbalanced force acts on it",
                    "It has a lot of mass",
                    "It's in space"
                ],
                correct: 1,
                explanation: "La Primera Ley (Ley de Inercia): Un objeto mantiene su estado de movimiento hasta que una fuerza desequilibrada lo cambia.",
                explanationEn: "First Law (Law of Inertia): An object maintains its state of motion until an unbalanced force changes it."
            },
            {
                category: "Leyes de Newton / Newton's Laws",
                question: "¬øQu√© es la <span class='translatable' data-en='inertia'>inercia</span>?",
                questionEn: "What is inertia?",
                options: [
                    "Una fuerza que empuja objetos",
                    "La tendencia de un objeto a resistir cambios en su movimiento",
                    "La velocidad de un objeto",
                    "El peso de un objeto"
                ],
                optionsEn: [
                    "A force that pushes objects",
                    "An object's tendency to resist changes in motion",
                    "An object's speed",
                    "An object's weight"
                ],
                correct: 1,
                explanation: "La inercia es la resistencia de un objeto a cambiar su movimiento. M√°s masa = m√°s inercia.",
                explanationEn: "Inertia is an object's resistance to changing its motion. More mass = more inertia."
            },
            {
                category: "Leyes de Newton / Newton's Laws",
                question: "La Segunda Ley de Newton: F = m √ó a. Si aumentas la <span class='translatable' data-en='force'>fuerza</span>, ¬øqu√© pasa con la aceleraci√≥n?",
                questionEn: "Newton's Second Law: F = m √ó a. If you increase force, what happens to acceleration?",
                options: [
                    "Disminuye",
                    "Se mantiene igual",
                    "Aumenta",
                    "Se vuelve cero"
                ],
                optionsEn: [
                    "Decreases",
                    "Stays the same",
                    "Increases",
                    "Becomes zero"
                ],
                correct: 2,
                explanation: "M√°s fuerza = m√°s aceleraci√≥n (si la masa es igual). Empujar m√°s fuerte hace que algo acelere m√°s r√°pido.",
                explanationEn: "More force = more acceleration (if mass is the same). Pushing harder makes something accelerate faster."
            },
            {
                category: "Leyes de Newton / Newton's Laws",
                question: "La Tercera Ley de Newton dice: Para cada acci√≥n hay una:",
                questionEn: "Newton's Third Law says: For every action there is:",
                options: [
                    "Fuerza m√°s grande",
                    "Reacci√≥n igual y opuesta",
                    "Fuerza de gravedad",
                    "Aceleraci√≥n"
                ],
                optionsEn: [
                    "Bigger force",
                    "Equal and opposite reaction",
                    "Force of gravity",
                    "Acceleration"
                ],
                correct: 1,
                explanation: "Acci√≥n y reacci√≥n: Si empujas una pared, la pared te empuja a ti con fuerza igual pero opuesta.",
                explanationEn: "Action and reaction: If you push a wall, the wall pushes you with equal but opposite force."
            },
            {
                category: "Leyes de Newton / Newton's Laws",
                question: "Cuando caminas, empujas el piso hacia atr√°s. ¬øQu√© hace el piso?",
                questionEn: "When you walk, you push the floor backwards. What does the floor do?",
                options: [
                    "No hace nada",
                    "Te empuja hacia adelante",
                    "Te empuja hacia abajo",
                    "Se mueve hacia atr√°s"
                ],
                optionsEn: [
                    "Does nothing",
                    "Pushes you forward",
                    "Pushes you down",
                    "Moves backwards"
                ],
                correct: 1,
                explanation: "Tercera Ley: El piso te empuja hacia adelante (reacci√≥n) cuando t√∫ lo empujas hacia atr√°s (acci√≥n).",
                explanationEn: "Third Law: The floor pushes you forward (reaction) when you push it backward (action)."
            },
            // Gravity
            {
                category: "Gravedad / Gravity",
                question: "¬øQu√© es la <span class='translatable' data-en='gravity'>gravedad</span>?",
                questionEn: "What is gravity?",
                options: [
                    "Una fuerza que empuja objetos hacia arriba",
                    "Una fuerza que atrae objetos hacia el centro de la Tierra",
                    "Una fuerza que hace que los objetos floten",
                    "Una fuerza que solo afecta objetos pesados"
                ],
                optionsEn: [
                    "A force that pushes objects up",
                    "A force that pulls objects toward Earth's center",
                    "A force that makes objects float",
                    "A force that only affects heavy objects"
                ],
                correct: 1,
                explanation: "La gravedad es una fuerza de atracci√≥n que jala todos los objetos hacia el centro de la Tierra.",
                explanationEn: "Gravity is an attractive force that pulls all objects toward Earth's center."
            },
            {
                category: "Gravedad / Gravity",
                question: "¬øPor qu√© una pelota cae al suelo cuando la sueltas?",
                questionEn: "Why does a ball fall to the ground when you drop it?",
                options: [
                    "Porque el aire la empuja",
                    "Por la gravedad",
                    "Porque es pesada",
                    "Por la fricci√≥n"
                ],
                optionsEn: [
                    "Because air pushes it",
                    "Because of gravity",
                    "Because it's heavy",
                    "Because of friction"
                ],
                correct: 1,
                explanation: "La gravedad jala la pelota hacia la Tierra, haci√©ndola caer.",
                explanationEn: "Gravity pulls the ball toward Earth, making it fall."
            },
            // Push and Pull
            {
                category: "Empuj√≥n y Jal√≥n / Push and Pull",
                question: "Abrir una puerta jal√°ndola es un ejemplo de:",
                questionEn: "Opening a door by pulling it is an example of:",
                options: [
                    "Un empuj√≥n",
                    "Un jal√≥n",
                    "Gravedad",
                    "Fricci√≥n"
                ],
                optionsEn: [
                    "A push",
                    "A pull",
                    "Gravity",
                    "Friction"
                ],
                correct: 1,
                explanation: "Jalar es mover algo hacia ti. Abrir una puerta hacia ti es un jal√≥n.",
                explanationEn: "Pulling is moving something toward you. Opening a door toward you is a pull."
            },
            {
                category: "Empuj√≥n y Jal√≥n / Push and Pull",
                question: "¬øCu√°l es un ejemplo de <span class='translatable' data-en='push'>empuj√≥n</span>?",
                questionEn: "Which is an example of a push?",
                options: [
                    "Jalar un carrito",
                    "Presionar un bot√≥n",
                    "Abrir un caj√≥n hacia ti",
                    "Usar un im√°n para atraer metal"
                ],
                optionsEn: [
                    "Pulling a cart",
                    "Pressing a button",
                    "Opening a drawer toward you",
                    "Using a magnet to attract metal"
                ],
                correct: 1,
                explanation: "Empujar es aplicar fuerza alejando algo de ti. Presionar un bot√≥n es un empuj√≥n.",
                explanationEn: "Pushing is applying force to move something away from you. Pressing a button is a push."
            },
            // Simple Machines
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "¬øCu√°ntas m√°quinas simples hay?",
                questionEn: "How many simple machines are there?",
                options: [
                    "4",
                    "5",
                    "6",
                    "8"
                ],
                optionsEn: [
                    "4",
                    "5",
                    "6",
                    "8"
                ],
                correct: 2,
                explanation: "Hay 6 m√°quinas simples: palanca, polea, plano inclinado, rueda y eje, tornillo, y cu√±a.",
                explanationEn: "There are 6 simple machines: lever, pulley, inclined plane, wheel and axle, screw, and wedge."
            },
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "Una rampa es un ejemplo de:",
                questionEn: "A ramp is an example of:",
                options: [
                    "Palanca",
                    "Polea",
                    "Plano inclinado",
                    "Cu√±a"
                ],
                optionsEn: [
                    "Lever",
                    "Pulley",
                    "Inclined plane",
                    "Wedge"
                ],
                correct: 2,
                explanation: "Una rampa es un plano inclinado - hace m√°s f√°cil mover objetos hacia arriba usando menos fuerza.",
                explanationEn: "A ramp is an inclined plane - it makes it easier to move objects up using less force."
            },
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "Un subibaja (balanc√≠n) es un ejemplo de:",
                questionEn: "A seesaw is an example of:",
                options: [
                    "Palanca",
                    "Polea",
                    "Tornillo",
                    "Rueda y eje"
                ],
                optionsEn: [
                    "Lever",
                    "Pulley",
                    "Screw",
                    "Wheel and axle"
                ],
                correct: 0,
                explanation: "Una palanca es una barra que gira sobre un punto fijo (fulcro). El subibaja gira en el centro.",
                explanationEn: "A lever is a bar that rotates on a fixed point (fulcrum). The seesaw rotates in the center."
            },
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "¬øPara qu√© se usan las m√°quinas simples?",
                questionEn: "What are simple machines used for?",
                options: [
                    "Para crear m√°s trabajo",
                    "Para hacer el trabajo m√°s f√°cil",
                    "Para eliminar la fricci√≥n",
                    "Para aumentar la gravedad"
                ],
                optionsEn: [
                    "To create more work",
                    "To make work easier",
                    "To eliminate friction",
                    "To increase gravity"
                ],
                correct: 1,
                explanation: "Las m√°quinas simples hacen el trabajo m√°s f√°cil, usualmente reduciendo la fuerza necesaria.",
                explanationEn: "Simple machines make work easier, usually by reducing the force needed."
            },
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "Un cuchillo y un hacha son ejemplos de:",
                questionEn: "A knife and an axe are examples of:",
                options: [
                    "Palancas",
                    "Poleas",
                    "Cu√±as",
                    "Tornillos"
                ],
                optionsEn: [
                    "Levers",
                    "Pulleys",
                    "Wedges",
                    "Screws"
                ],
                correct: 2,
                explanation: "Una cu√±a tiene forma triangular y se usa para separar o cortar cosas.",
                explanationEn: "A wedge has a triangular shape and is used to split or cut things."
            },
            {
                category: "M√°quinas Simples / Simple Machines",
                question: "Una <span class='translatable' data-en='pulley'>polea</span> usa una cuerda y una rueda para:",
                questionEn: "A pulley uses a rope and wheel to:",
                options: [
                    "Crear m√°s fricci√≥n",
                    "Levantar objetos m√°s f√°cilmente",
                    "Aumentar la gravedad",
                    "Hacer las cosas m√°s pesadas"
                ],
                optionsEn: [
                    "Create more friction",
                    "Lift objects more easily",
                    "Increase gravity",
                    "Make things heavier"
                ],
                correct: 1,
                explanation: "Una polea cambia la direcci√≥n de la fuerza, haciendo m√°s f√°cil levantar cosas pesadas.",
                explanationEn: "A pulley changes the direction of force, making it easier to lift heavy things."
            },
            // Friction
            {
                category: "Fricci√≥n / Friction",
                question: "¬øQu√© es la <span class='translatable' data-en='friction'>fricci√≥n</span>?",
                questionEn: "What is friction?",
                options: [
                    "Una fuerza que ayuda al movimiento",
                    "Una fuerza que se opone al movimiento",
                    "Una fuerza que crea movimiento",
                    "Una fuerza que elimina la gravedad"
                ],
                optionsEn: [
                    "A force that helps motion",
                    "A force that opposes motion",
                    "A force that creates motion",
                    "A force that eliminates gravity"
                ],
                correct: 1,
                explanation: "La fricci√≥n es una fuerza que se opone al movimiento cuando dos superficies se tocan.",
                explanationEn: "Friction is a force that opposes motion when two surfaces touch."
            },
            {
                category: "Fricci√≥n / Friction",
                question: "¬øPor qu√© es m√°s f√°cil deslizarse en hielo que en concreto?",
                questionEn: "Why is it easier to slide on ice than on concrete?",
                options: [
                    "El hielo tiene m√°s fricci√≥n",
                    "El hielo tiene menos fricci√≥n",
                    "El concreto es m√°s pesado",
                    "La gravedad es diferente"
                ],
                optionsEn: [
                    "Ice has more friction",
                    "Ice has less friction",
                    "Concrete is heavier",
                    "Gravity is different"
                ],
                correct: 1,
                explanation: "El hielo es liso y tiene menos fricci√≥n, lo que hace m√°s f√°cil deslizarse.",
                explanationEn: "Ice is smooth and has less friction, which makes it easier to slide."
            }
        ];

        let currentLanguage = 'spanish';
        let questions = [];
        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let missedQuestions = [];
        let timerInterval = null;
        let timeLeft = 60;

        // Review state
        let reviewQuestions = [];
        let currentReviewQuestion = 0;
        let reviewScore = 0;
        let selectedReviewOption = null;

        // Initialize flashcards
        function renderFlashcards() {
            const grid = document.getElementById('flashcardGrid');
            grid.innerHTML = flashcards.map((card, i) => `
                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">${card.spanish}</div>
                        <div class="flashcard-back">${card.english}</div>
                    </div>
                </div>
            `).join('');
        }

        function flipCard(card) {
            card.classList.toggle('flipped');
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'spanish' ? 'english' : 'spanish';
            const langLabel = currentLanguage === 'spanish' ? 'Show English' : 'Mostrar Espa√±ol';
            document.getElementById('langText').textContent = langLabel;
            if (document.getElementById('langTextQuiz')) {
                document.getElementById('langTextQuiz').textContent = langLabel;
            }
            if (document.getElementById('langTextResults')) {
                document.getElementById('langTextResults').textContent = langLabel;
            }
            
            // If quiz is active, re-render the current question in the new language
            if (!document.getElementById('quizScreen').classList.contains('hidden')) {
                updateQuestionLanguage();
            }
            
            // If results screen is active, update the review section
            if (!document.getElementById('resultsScreen').classList.contains('hidden')) {
                updateResultsLanguage();
            }
        }
        
        function updateQuestionLanguage() {
            const q = questions[currentQuestion];
            document.getElementById('questionText').innerHTML = 
                currentLanguage === 'spanish' ? q.question : q.questionEn;
            
            const options = currentLanguage === 'spanish' ? q.options : q.optionsEn;
            const optionElements = document.querySelectorAll('.option');
            optionElements.forEach((opt, i) => {
                opt.innerHTML = options[i];
            });
            
            // Update labels
            const questionLabel = currentLanguage === 'spanish' ? 'Pregunta' : 'Question';
            const ofLabel = currentLanguage === 'spanish' ? 'de' : 'of';
            document.getElementById('questionNum').textContent = 
                `${questionLabel} ${currentQuestion + 1} ${ofLabel} ${questions.length}`;
            
            const pointsLabel = currentLanguage === 'spanish' ? 'Puntos' : 'Points';
            document.getElementById('scoreDisplay').textContent = `${pointsLabel}: ${score}`;
            
            // Update button texts
            document.getElementById('submitBtn').textContent = 
                currentLanguage === 'spanish' ? 'Enviar Respuesta / Submit' : 'Submit Answer';
            document.getElementById('nextBtn').textContent = 
                currentLanguage === 'spanish' ? 'Siguiente ‚Üí / Next ‚Üí' : 'Next ‚Üí';
        }

        function shuffle(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startQuiz() {
            questions = shuffle(questionBank).slice(0, 15);
            currentQuestion = 0;
            score = 0;
            missedQuestions = [];
            
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            
            document.getElementById('progressFill').style.width = 
                `${((currentQuestion) / questions.length) * 100}%`;
            const questionLabel = currentLanguage === 'spanish' ? 'Pregunta' : 'Question';
            const ofLabel = currentLanguage === 'spanish' ? 'de' : 'of';
            document.getElementById('questionNum').textContent = 
                `${questionLabel} ${currentQuestion + 1} ${ofLabel} ${questions.length}`;
            const pointsLabel = currentLanguage === 'spanish' ? 'Puntos' : 'Points';
            document.getElementById('scoreDisplay').textContent = `${pointsLabel}: ${score}`;
            document.getElementById('category').textContent = q.category;
            
            document.getElementById('questionText').innerHTML = 
                currentLanguage === 'spanish' ? q.question : q.questionEn;
            
            const options = currentLanguage === 'spanish' ? q.options : q.optionsEn;
            const container = document.getElementById('optionsContainer');
            container.innerHTML = options.map((opt, i) => `
                <div class="option" data-index="${i}" onclick="selectOption(this, ${i})">
                    ${opt}
                </div>
            `).join('');
            
            selectedOption = null;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('submitBtn').classList.remove('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
            document.getElementById('feedback').classList.add('hidden');
            
            startTimer();
        }

        function startTimer() {
            timeLeft = 60;
            updateTimerDisplay();
            
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoSubmit();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timer = document.getElementById('timer');
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timer.textContent = `‚è±Ô∏è ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            timer.classList.remove('warning', 'danger');
            if (timeLeft <= 10) timer.classList.add('danger');
            else if (timeLeft <= 20) timer.classList.add('warning');
        }

        function selectOption(element, index) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedOption = index;
            document.getElementById('submitBtn').disabled = false;
        }

        function autoSubmit() {
            if (selectedOption === null) {
                selectedOption = -1;
            }
            submitAnswer();
        }

        function submitAnswer() {
            clearInterval(timerInterval);
            
            const q = questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach((opt, i) => {
                opt.style.pointerEvents = 'none';
                if (i === q.correct) {
                    opt.classList.add('correct');
                } else if (i === selectedOption && selectedOption !== q.correct) {
                    opt.classList.add('incorrect');
                }
            });
            
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('hidden', 'correct', 'incorrect');
            
            const explanation = currentLanguage === 'spanish' ? q.explanation : (q.explanationEn || q.explanation);
            
            if (selectedOption === q.correct) {
                score++;
                feedback.classList.add('correct');
                const correctMsg = currentLanguage === 'spanish' ? '‚úÖ ¬°Correcto!' : '‚úÖ Correct!';
                feedback.innerHTML = `<strong>${correctMsg}</strong><br>${explanation}`;
            } else {
                feedback.classList.add('incorrect');
                const correctAnswer = currentLanguage === 'spanish' ? 
                    q.options[q.correct] : q.optionsEn[q.correct];
                const incorrectMsg = currentLanguage === 'spanish' ? '‚ùå Incorrecto' : '‚ùå Incorrect';
                const answerLabel = currentLanguage === 'spanish' ? 'La respuesta correcta es' : 'The correct answer is';
                feedback.innerHTML = `<strong>${incorrectMsg}</strong><br>
                    ${answerLabel}: <strong>${correctAnswer}</strong><br>
                    ${explanation}`;
                missedQuestions.push({
                    question: currentLanguage === 'spanish' ? q.question : q.questionEn,
                    correctAnswer: correctAnswer,
                    originalQuestion: q
                });
            }
            
            const pointsLbl = currentLanguage === 'spanish' ? 'Puntos' : 'Points';
            document.getElementById('scoreDisplay').textContent = `${pointsLbl}: ${score}`;
            document.getElementById('submitBtn').classList.add('hidden');
            document.getElementById('nextBtn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion >= questions.length) {
                showResults();
            } else {
                renderQuestion();
            }
        }

        function showResults() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('finalScore').textContent = `${percentage}%`;
            
            updateResultsLanguage();
            
            const reviewSection = document.getElementById('reviewSection');
            
            if (missedQuestions.length > 0) {
                // Start review mode
                reviewSection.classList.remove('hidden');
                startReviewMode();
            } else {
                reviewSection.classList.add('hidden');
            }
        }
        
        function updateResultsLanguage() {
            const percentage = Math.round((score / questions.length) * 100);
            
            // Update result labels based on language
            document.querySelector('#resultsScreen .results > h1').textContent = 
                currentLanguage === 'spanish' ? 'üéâ ¬°Quiz Completado!' : 'üéâ Quiz Complete!';
            document.querySelector('.score-label').textContent = 
                currentLanguage === 'spanish' ? 'Correctas' : 'Correct';
            
            let message = '';
            if (currentLanguage === 'spanish') {
                if (percentage >= 90) message = 'üåü ¬°Excelente! ¬°Eres un experto en fuerza y movimiento!';
                else if (percentage >= 70) message = 'üëç ¬°Muy bien! ¬°Buen trabajo entendiendo las fuerzas!';
                else if (percentage >= 50) message = 'üìö ¬°Sigue practicando! ¬°Repasa las leyes de Newton!';
                else message = 'üí™ ¬°No te rindas! Repasa las tarjetas e intenta de nuevo!';
            } else {
                if (percentage >= 90) message = 'üåü Excellent! You\'re a force and motion expert!';
                else if (percentage >= 70) message = 'üëç Great job! You understand forces well!';
                else if (percentage >= 50) message = 'üìö Keep practicing! Study Newton\'s laws more!';
                else message = 'üí™ Don\'t give up! Review the flashcards and try again!';
            }
            
            document.getElementById('resultsMessage').textContent = message;
            
            // Update restart separator text
            document.querySelector('.restart-separator p').textContent = 
                currentLanguage === 'spanish' ? '¬øListo para otro intento?' : 'Ready for another try?';
            
            // Update try again button
            document.querySelector('.btn-secondary').textContent = 
                currentLanguage === 'spanish' ? 'üîÑ Intentar de Nuevo' : 'üîÑ Try Again';
            
            // Update review header if visible
            if (document.getElementById('reviewHeader')) {
                document.getElementById('reviewHeader').textContent = 
                    currentLanguage === 'spanish' ? 'üìù ¬°Practiquemos las preguntas que fallaste!' : 'üìù Let\'s Practice the Missed Questions!';
            }
            
            // Update review complete header if visible
            if (document.getElementById('reviewCompleteHeader')) {
                document.getElementById('reviewCompleteHeader').textContent = 
                    currentLanguage === 'spanish' ? 'üéâ ¬°Repaso Completado!' : 'üéâ Review Complete!';
            }
        }

        // Review Mode Functions
        function startReviewMode() {
            reviewQuestions = [...missedQuestions];
            currentReviewQuestion = 0;
            reviewScore = 0;
            selectedReviewOption = null;
            
            document.getElementById('reviewScore').classList.add('hidden');
            document.getElementById('reviewProgress').classList.remove('hidden');
            document.getElementById('reviewQuestion').classList.remove('hidden');
            document.getElementById('reviewOptions').classList.remove('hidden');
            document.getElementById('reviewCheckBtn').classList.remove('hidden');
            
            // Update review header based on language
            document.getElementById('reviewHeader').textContent = 
                currentLanguage === 'spanish' ? 'üìù ¬°Practiquemos las preguntas que fallaste!' : 'üìù Let\'s Practice the Missed Questions!';
            
            renderReviewQuestion();
        }

        function renderReviewQuestion() {
            const q = reviewQuestions[currentReviewQuestion];
            const originalQ = q.originalQuestion;
            
            // Update progress text based on language
            const progressLabel = currentLanguage === 'spanish' ? 
                `Pregunta ${currentReviewQuestion + 1} de ${reviewQuestions.length}` :
                `Question ${currentReviewQuestion + 1} of ${reviewQuestions.length}`;
            document.getElementById('reviewProgress').textContent = progressLabel;
            
            // Show question in current language
            const questionText = currentLanguage === 'spanish' ? originalQ.question : originalQ.questionEn;
            document.getElementById('reviewQuestion').innerHTML = questionText;
            
            // Get options in current language and the correct answer
            const opts = currentLanguage === 'spanish' ? originalQ.options : originalQ.optionsEn;
            const correctAnswer = opts[originalQ.correct];
            
            // Shuffle options
            let allOptions = shuffle([...opts]);
            
            const optionsContainer = document.getElementById('reviewOptions');
            optionsContainer.innerHTML = allOptions.map((opt, i) => `
                <div class="review-option" data-correct="${opt === correctAnswer}" onclick="selectReviewOption(${i})">${opt}</div>
            `).join('');
            
            selectedReviewOption = null;
            document.getElementById('reviewCheckBtn').disabled = true;
            document.getElementById('reviewCheckBtn').classList.remove('hidden');
            document.getElementById('reviewCheckBtn').textContent = 
                currentLanguage === 'spanish' ? 'Verificar / Check' : 'Check Answer';
            document.getElementById('reviewNextBtn').classList.add('hidden');
            document.getElementById('reviewFeedback').classList.add('hidden');
        }

        function selectReviewOption(index) {
            const options = document.querySelectorAll('.review-option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            selectedReviewOption = index;
            document.getElementById('reviewCheckBtn').disabled = false;
        }

        function checkReviewAnswer() {
            const options = document.querySelectorAll('.review-option');
            const selectedOpt = options[selectedReviewOption];
            const isCorrect = selectedOpt.dataset.correct === 'true';
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.dataset.correct === 'true') {
                    opt.classList.add('reveal-correct');
                }
            });
            
            if (isCorrect) {
                selectedOpt.classList.add('correct');
                reviewScore++;
            } else {
                selectedOpt.classList.add('incorrect');
            }
            
            const feedback = document.getElementById('reviewFeedback');
            feedback.classList.remove('hidden', 'correct', 'incorrect');
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            if (currentLanguage === 'spanish') {
                feedback.textContent = isCorrect ? '‚úÖ ¬°Muy bien! ¬°Lo lograste!' : '‚ùå No exactamente. La respuesta correcta est√° resaltada.';
            } else {
                feedback.textContent = isCorrect ? '‚úÖ Great job! You got it!' : '‚ùå Not quite. The correct answer is highlighted.';
            }
            
            document.getElementById('reviewCheckBtn').classList.add('hidden');
            document.getElementById('reviewNextBtn').classList.remove('hidden');
            
            const nextBtnText = currentReviewQuestion < reviewQuestions.length - 1 
                ? (currentLanguage === 'spanish' ? 'Siguiente ‚Üí / Next ‚Üí' : 'Next Question ‚Üí')
                : (currentLanguage === 'spanish' ? 'Ver Resultados' : 'See Results');
            document.getElementById('reviewNextBtn').textContent = nextBtnText;
        }

        function nextReviewQuestion() {
            currentReviewQuestion++;
            if (currentReviewQuestion >= reviewQuestions.length) {
                showReviewResults();
            } else {
                renderReviewQuestion();
            }
        }

        function showReviewResults() {
            document.getElementById('reviewProgress').classList.add('hidden');
            document.getElementById('reviewQuestion').classList.add('hidden');
            document.getElementById('reviewOptions').classList.add('hidden');
            document.getElementById('reviewFeedback').classList.add('hidden');
            document.getElementById('reviewCheckBtn').classList.add('hidden');
            document.getElementById('reviewNextBtn').classList.add('hidden');
            
            const scoreDiv = document.getElementById('reviewScore');
            scoreDiv.classList.remove('hidden');
            
            document.getElementById('reviewCompleteHeader').textContent = 
                currentLanguage === 'spanish' ? 'üéâ ¬°Repaso Completado!' : 'üéâ Review Complete!';
            
            const percentage = Math.round((reviewScore / reviewQuestions.length) * 100);
            const scoreText = currentLanguage === 'spanish'
                ? `¬°Obtuviste ${reviewScore} de ${reviewQuestions.length} correctas (${percentage}%) en el repaso!`
                : `You got ${reviewScore} out of ${reviewQuestions.length} correct (${percentage}%) on the review!`;
            document.getElementById('reviewScoreText').textContent = scoreText;
        }

        function restartQuiz() {
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('reviewSection').classList.add('hidden');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', renderFlashcards);
    </script>
</body>
</html>
